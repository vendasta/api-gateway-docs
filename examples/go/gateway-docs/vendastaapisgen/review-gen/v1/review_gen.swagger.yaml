swagger: "2.0"
info:
  title: review-gen/v1/review_gen.proto
  version: version not set
tags:
  - name: CRM
  - name: Reviews
consumes:
  - application/json
produces:
  - application/json
paths:
  /v1/contact/create:
    post:
      summary: Adds a contact to the CRM and optionally requests a review from them
      operationId: CRM_CreateContact
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateContactRequest'
      tags:
        - CRM
  /v1/review/get:
    post:
      operationId: Reviews_GetMulti
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetMultiReviewResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetMultiReviewRequest'
      tags:
        - Reviews
  /v1/review/list:
    post:
      operationId: Reviews_List
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListReviewResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1ListReviewRequest'
      tags:
        - Reviews
definitions:
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
    additionalProperties: {}
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  v1Contact:
    type: object
    properties:
      email:
        type: string
        title: The customer's email (used to send email review requests)
      firstName:
        type: string
        title: The customer's first name (used in review request templates)
      lastName:
        type: string
        title: The customer's last name (used in review request templates)
      mobileNumber:
        type: string
        title: The customer's mobile number (used to send SMS review requests)
    title: A customer that can be asked to review the business
  v1CreateContactRequest:
    type: object
    properties:
      contact:
        $ref: '#/definitions/v1Contact'
        title: The contact to create
      requestReviewByEmail:
        type: boolean
        title: Request a review via the default email template?
      requestReviewBySms:
        type: boolean
        title: Request a review via the default SMS template?
      account:
        type: string
        title: The AccountGroupId to create the contact under
    title: Creates a new Contact, and optionally request a review from them via email or SMS
  v1GetMultiReviewRequest:
    type: object
    properties:
      businessId:
        type: string
        title: The business the reviews are associated with
      reviewId:
        type: array
        items:
          type: string
        title: A list of review IDs to retrieve
  v1GetMultiReviewResponse:
    type: object
    properties:
      reviews:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Review'
        title: A list of reviews matching the requested IDs, null if they can't be found
  v1ListReviewRequest:
    type: object
    properties:
      businessId:
        type: string
        title: The ID of the business to gather reviews for
      from:
        type: string
        format: date-time
        title: The start of the window in time to gather reviews
      to:
        type: string
        format: date-time
        title: The end of the window in time to gather reviews
      cursor:
        type: string
        description: |-
          A cursor is provided to allow the client to gather reviews beyond the
          first page of results.
    title: Requests a set of reviews for a business within a specific timeframe
  v1ListReviewResponse:
    type: object
    properties:
      reviews:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Review'
        title: A list of reviews matching the requested time interval
      more:
        type: boolean
        description: |-
          Indicates that more reviews were avaialable, but not returned due
          to the page size limit.
      cursor:
        type: string
        description: |-
          A cursor that can be passed to subsequent GetReview requests to
          page through the results.
  v1Review:
    type: object
    properties:
      reviewId:
        type: string
        title: The ID of the review
      listingId:
        type: string
        title: The ID of the listing the review is associated with
      businessId:
        type: string
        title: The ID of the business the listing is associated with
      sourceId:
        type: string
        title: The ID of the review source
      title:
        type: string
        title: The title of the review (not all sites have a title)
      hasRating:
        type: boolean
        title: Indicates whether a star rating is included with the review
      stars:
        type: integer
        format: int32
        title: The number of stars (1-5), only valid if has_rating is true
      snippet:
        type: string
        description: "A snippet of the text of the review (not all sites require a reviewer to \nwrite anything to accompany their star rating)."
      link:
        type: string
        description: |-
          A direct link to the review (or listing, if the source does not support
          direct links to individual reviews).
      retrieved:
        type: string
        format: date-time
        description: |-
          The time when review was retrieved.  Some sources have push-APIs so the
          reviews will be available almost immediately, others only after they are
          periodically fetch.
      created:
        type: string
        format: date-time
        title: "The time when review was created (many sites quarantine reviews, so this \noften is not when the review first appeared on the site)"
    description: |-
      Stores the data about a single review, on a single business listing, on a single
      review source.
