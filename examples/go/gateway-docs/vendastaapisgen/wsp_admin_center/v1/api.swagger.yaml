swagger: "2.0"
info:
  title: wsp_admin_center/v1/api.proto
  version: version not set
tags:
  - name: AdminCenterService
  - name: SearchService
  - name: SiteService
  - name: WordpressService
consumes:
  - application/json
produces:
  - application/json
paths:
  /wsp_admin_center.v1.AdminCenterService/GetAppConfig:
    post:
      summary: GetAppConfig returns the AppConfig associated with the partner ID present on the request message
      operationId: AdminCenterService_GetAppConfig
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetAppConfigResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetAppConfigRequest'
      tags:
        - AdminCenterService
  /wsp_admin_center.v1.AdminCenterService/SetShowAdvancedFeatures:
    post:
      summary: SetShowAdvancedFeatures set whether to show advanced feature for a partner
      operationId: AdminCenterService_SetShowAdvancedFeatures
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1SetShowAdvancedFeaturesRequest'
      tags:
        - AdminCenterService
  /wsp_admin_center.v1.AdminCenterService/SetShowIncludedTemplates:
    post:
      summary: SetShowIncludedTemplates set whether to show Vendasta templates for a partner
      operationId: AdminCenterService_SetShowIncludedTemplates
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1SetShowIncludedTemplatesRequest'
      tags:
        - AdminCenterService
  /wsp_admin_center.v1.SearchService/GetDiscrepancyData:
    post:
      operationId: SearchService_GetDiscrepancyData
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetDiscrepancyDataResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetDiscrepancyDataRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/GetMultiSite:
    post:
      summary: GetMultiSite returns Wordpress sites for a given array of site IDs
      operationId: SearchService_GetMultiSite
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetMultiSiteResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetMultiSiteRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/GetPidHealthData:
    post:
      summary: GetPidData returns the health checks of the sites which they are requesting
      operationId: SearchService_GetPidHealthData
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SearchPidHealthResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1SearchPidHealthRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/GetPluginUpdatesCount:
    post:
      summary: GetPluginUpdatesCount returns how many plugins that need update to new version for a partner
      operationId: SearchService_GetPluginUpdatesCount
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetPluginUpdatesCountResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetPluginUpdatesCountRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/GetSite:
    post:
      summary: GetSite returns a Wordpress site for a given site ID
      operationId: SearchService_GetSite
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetSiteResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetSiteRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/GetSiteHealthChecks:
    post:
      summary: GetSiteHealthChecks returns the health checks of the sites which they are requesting
      operationId: SearchService_GetSiteHealthChecks
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetHealthCheckResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1GetHealthCheckRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SearchService/Search:
    post:
      summary: Search elasticsearch for WordPress sites according to search queries and filters
      operationId: SearchService_Search
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SearchResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1SearchRequest'
      tags:
        - SearchService
  /wsp_admin_center.v1.SiteService/BackfillSites:
    post:
      summary: Start sites backfill into admin center
      operationId: SiteService_BackfillSites
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1BackfillResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1BackfillRequest'
      tags:
        - SiteService
  /wsp_admin_center.v1.WordpressService/BootstrapSite:
    post:
      summary: |-
        BootstrapSite allows a caller to update a wordpress site in vstore with core, plugins and theme information.
        	Returns nil if update was successful or a verrors on failure
      operationId: WordpressService_BootstrapSite
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1BootstrapSiteRequest'
      tags:
        - WordpressService
  /wsp_admin_center.v1.WordpressService/UpdateCore:
    post:
      summary: |-
        UpdateCore allows a caller to update a wordpress site in vstore with latest core information.
        	Returns nil if update was successful or a verrors on failure
      operationId: WordpressService_UpdateCore
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1UpdateCoreRequest'
      tags:
        - WordpressService
  /wsp_admin_center.v1.WordpressService/UpdatePlugins:
    post:
      summary: |-
        UpdatePlugins allows a caller to update a wordpress site in vstore with latest plugins information.
        	Returns nil if update was successful or a verrors on failure
      operationId: WordpressService_UpdatePlugins
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1UpdatePluginsRequest'
      tags:
        - WordpressService
  /wsp_admin_center.v1.WordpressService/UpdateTheme:
    post:
      summary: |-
        UpdateTheme allows a caller to update a wordpress site in vstore with latest theme information.
        	Returns nil if update was successful or a verrors on failure
      operationId: WordpressService_UpdateTheme
      responses:
        "200":
          description: A successful response.
          schema:
            type: object
            properties: {}
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1UpdateThemeRequest'
      tags:
        - WordpressService
definitions:
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
    additionalProperties: {}
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  v1AppConfig:
    type: object
    properties:
      partnerId:
        type: string
      showAdvancedFeatures:
        type: boolean
      showIncludedTemplates:
        type: boolean
  v1BackfillRequest:
    type: object
    properties:
      pageSize:
        type: integer
        format: int32
      index:
        type: integer
        format: int32
      partnerId:
        type: string
  v1BackfillResponse:
    type: object
    properties:
      message:
        type: string
  v1BootstrapSiteRequest:
    type: object
    properties:
      siteId:
        type: string
      coreCurrentVersion:
        type: string
      coreLatestVersion:
        type: string
      plugins:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WordPressAddon'
      theme:
        $ref: '#/definitions/v1WordPressAddon'
  v1GetAppConfigRequest:
    type: object
    properties:
      partnerId:
        type: string
  v1GetAppConfigResponse:
    type: object
    properties:
      config:
        $ref: '#/definitions/v1AppConfig'
  v1GetDiscrepancyDataRequest:
    type: object
    properties:
      environment:
        type: string
  v1GetDiscrepancyDataResponse:
    type: object
    properties:
      discrepancyData:
        type: array
        items:
          type: string
  v1GetHealthCheckRequest:
    type: object
    properties:
      siteId:
        type: array
        items:
          type: string
  v1GetHealthCheckResponse:
    type: object
    properties:
      siteHealths:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SiteHealths'
        title: The cursor to use for the next healthcheckData
      hasMore:
        type: boolean
        title: Whether or not more results exist
      totalResults:
        type: string
        format: int64
        title: The total number of results for this query across all pages
  v1GetMultiSiteRequest:
    type: object
    properties:
      siteIds:
        type: array
        items:
          type: string
  v1GetMultiSiteResponse:
    type: object
    properties:
      sites:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WordPressSite'
  v1GetPluginUpdatesCountRequest:
    type: object
    properties:
      partnerId:
        type: string
  v1GetPluginUpdatesCountResponse:
    type: object
    properties:
      totalCount:
        type: string
        format: int64
  v1GetSiteRequest:
    type: object
    properties:
      siteId:
        type: string
  v1GetSiteResponse:
    type: object
    properties:
      site:
        $ref: '#/definitions/v1WordPressSite'
  v1HealthCheckValues:
    type: object
    properties:
      state:
        type: string
      created:
        type: string
        format: date-time
      updated:
        type: string
        format: date-time
  v1SearchFilters:
    type: object
    properties:
      partnerId:
        type: string
      pluginUpdating:
        type: boolean
        title: filter sites when its plugins are not the latest version
      themeUpdating:
        type: boolean
        title: filter sites when its theme is not the latest version
      coreUpdating:
        type: boolean
        title: filter sites when its core is not the latest version
      multisite:
        type: boolean
        title: filter the multisites
  v1SearchPidHealthRequest:
    type: object
    properties:
      partnerId:
        type: string
  v1SearchPidHealthResponse:
    type: object
    properties:
      sites:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SiteHealth'
      totalResults:
        type: string
        format: int64
      totalUpSites:
        type: string
        format: int64
      totalDownSites:
        type: string
        format: int64
      totalDeactivatedSites:
        type: string
        format: int64
  v1SearchRequest:
    type: object
    properties:
      filters:
        $ref: '#/definitions/v1SearchFilters'
      searchTerm:
        type: string
      searchFields:
        type: array
        items:
          $ref: '#/definitions/v1SearchableField'
      sortOptions:
        $ref: '#/definitions/v1SortOptions'
      pageSize:
        type: string
        format: int64
      from:
        type: string
        format: int64
  v1SearchResponse:
    type: object
    properties:
      sites:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WordPressSite'
      hasMore:
        type: boolean
        title: Whether or not more results exist
      totalResults:
        type: string
        format: int64
        title: The total number of results for this query across all pages
  v1SearchableField:
    type: string
    enum:
      - SEARCHABLE_FIELD_ACCOUNT_ID
      - SEARCHABLE_FIELD_ACCOUNT_GROUP_NAME
      - SEARCHABLE_FIELD_PRIMARY_DOMAIN
    default: SEARCHABLE_FIELD_ACCOUNT_ID
    description: All of the possible fields that can be searched against the search term.
  v1SetShowAdvancedFeaturesRequest:
    type: object
    properties:
      partnerId:
        type: string
      showAdvancedFeatures:
        type: boolean
  v1SetShowIncludedTemplatesRequest:
    type: object
    properties:
      partnerId:
        type: string
      showIncludedTemplates:
        type: boolean
  v1SiteHealth:
    type: object
    properties:
      siteId:
        type: string
      currentHealth:
        type: string
      siteActivationStatus:
        type: boolean
  v1SiteHealths:
    type: object
    properties:
      partnerId:
        type: string
      siteId:
        type: string
      accountId:
        type: string
      primaryDomain:
        type: string
      uptime1day:
        type: string
      uptime7days:
        type: string
      uptime30days:
        type: string
      currentHealth:
        type: string
      healthCheckValues:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1HealthCheckValues'
      statusCode:
        type: string
  v1SortDirection:
    type: string
    enum:
      - SORT_DIRECTION_ASC
      - SORT_DIRECTION_DESC
    default: SORT_DIRECTION_ASC
    description: The directions that a result set can be sorted in.
  v1SortField:
    type: string
    enum:
      - SORT_FIELD_MODIFIED
      - SORT_FIELD_CREATED
      - SORT_FIELD_ACCOUNT_GROUP_NAME
      - SORT_FIELD_PRIMARY_DOMAIN
    default: SORT_FIELD_MODIFIED
    description: The field to sort a result set on.
  v1SortOptions:
    type: object
    properties:
      direction:
        $ref: '#/definitions/v1SortDirection'
        title: A direction to sort results in
      field:
        $ref: '#/definitions/v1SortField'
        title: Field to sort on
    title: Options for controlling the order of query results
  v1SubSiteInfo:
    type: object
    properties:
      blogId:
        type: string
        format: int64
        description: blog_id represents the unique integer id of the subsite.
      blogName:
        type: string
        title: blog_name represents the title description of the subsite added by user
      path:
        type: string
        title: path represents the path of the subsite in url after domain
      status:
        type: string
        title: subsite status
      createdAt:
        type: string
        title: subsite created time
      lastUpdated:
        type: string
        title: subsite last updated time
      metadata:
        type: string
        title: subsite metadata
  v1UpdateCoreRequest:
    type: object
    properties:
      siteId:
        type: string
      coreCurrentVersion:
        type: string
      coreLatestVersion:
        type: string
  v1UpdatePluginsRequest:
    type: object
    properties:
      siteId:
        type: string
      plugins:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WordPressAddon'
      method:
        type: string
  v1UpdateThemeRequest:
    type: object
    properties:
      siteId:
        type: string
      theme:
        $ref: '#/definitions/v1WordPressAddon'
  v1WordPressAddon:
    type: object
    properties:
      id:
        type: string
      currentVersion:
        type: string
      latestVersion:
        type: string
  v1WordPressSite:
    type: object
    properties:
      siteId:
        type: string
      accountId:
        type: string
      accountGroupName:
        type: string
      primaryDomain:
        type: string
      pluginUpdates:
        type: integer
        format: int32
        title: how many plugins are not the latest version
      currentTheme:
        $ref: '#/definitions/v1WordPressAddon'
      currentCoreVersion:
        type: string
      latestCoreVersion:
        type: string
      created:
        type: string
        format: date-time
      updated:
        type: string
        format: date-time
      plugins:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WordPressAddon'
      isMultisite:
        type: boolean
      subsiteInfo:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SubSiteInfo'
